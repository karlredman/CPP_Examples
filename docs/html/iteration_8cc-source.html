<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Various C++ Examples (including IPC): iteration.cc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>iteration.cc</h1><a href="iteration_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00005 <span class="preprocessor">#include &lt;iostream&gt;</span>
00006 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00007 
<a name="l00008"></a><a class="code" href="iteration_8cc.html#a0">00008</a> <span class="preprocessor">#define MAX 10</span>
00009 <span class="preprocessor"></span>
<a name="l00010"></a><a class="code" href="iteration_8cc.html#a1">00010</a> <span class="keywordtype">int</span> <a class="code" href="virtuals_8cc.html#a1">main</a> (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ** argv)
00011 {
00012   <span class="keywordtype">int</span> i, j;
00013 
00014   <span class="keywordflow">for</span>(i=0, j=0; i &lt; <a class="code" href="iteration_8cc.html#a0">MAX</a>; i++)
00015     {
00016       cout &lt;&lt; <span class="stringliteral">"IN LOOP:i="</span> &lt;&lt; i &lt;&lt; endl;
00017       cout &lt;&lt; <span class="stringliteral">"IN LOOP:j="</span> &lt;&lt; j &lt;&lt; endl;
00018       ++j;
00019     }
00020 
00021   cout &lt;&lt; <span class="stringliteral">"AFTER LOOP:i="</span> &lt;&lt; i &lt;&lt; endl;
00022   cout &lt;&lt; <span class="stringliteral">"AFTER LOOP:j="</span> &lt;&lt; j &lt;&lt; endl;
00023 
00025 
00026   <span class="comment">//array copying using pointers.</span>
00027   <span class="keywordtype">char</span> s1[<a class="code" href="iteration_8cc.html#a0">MAX</a>] = <span class="stringliteral">"012345678"</span>;
00028   <span class="keywordtype">char</span> s2[<a class="code" href="iteration_8cc.html#a0">MAX</a>];
00029 
00030   <span class="comment">//set the contents of s2 to all '\0' characters.</span>
00031   memset(s2, 0, <a class="code" href="iteration_8cc.html#a0">MAX</a>); 
00032 
00033   <span class="keywordtype">char</span> *p1 = s1, *p2 = s2;
00034 
00035   <span class="comment">//copy the contents of one array into another using pointers.</span>
00036   <span class="keywordflow">while</span>(*p2++ = *p1++);
00037   cout &lt;&lt; <span class="stringliteral">"s2="</span> &lt;&lt; s2 &lt;&lt; endl;
00038 
00039   <span class="comment">//reset the contents of s2 to "null" characters</span>
00040   memset(s2, 0, <a class="code" href="iteration_8cc.html#a0">MAX</a>); 
00041 
00042   <span class="comment">//put something into the first element of s2 so we will be able to</span>
00043   <span class="comment">//print it later on (otherwise a '\0' character is sitting in there</span>
00044   <span class="comment">//from the memset we just did).</span>
00045   s2[0] = <span class="charliteral">'9'</span>;
00046 
00047   <span class="comment">//reset the pointers to point to be beginning of each array</span>
00048   <span class="comment">//respectively.</span>
00049   p1 = s1, p2 = s2;
00050 
00051   <span class="comment">//copy from the second element of s1 thru to the last element of s1</span>
00052   <span class="comment">//(including terminating 0) into the second element of s2 thru the</span>
00053   <span class="comment">//last element of s2.</span>
00054   <span class="keywordflow">while</span>(*++p2 = *++p1);
00055   cout &lt;&lt; <span class="stringliteral">"s2="</span> &lt;&lt; s2 &lt;&lt; endl;
00056 
00057 
00058   <span class="comment">//ERROR</span>
00059   <span class="comment">/* This is a programming error. We copy the contents of p1 from the</span>
00060 <span class="comment">  first to the last element (MAX size) including the null terminator</span>
00061 <span class="comment">  (\0) but the size of the array (s2) that p2 points to is only MAX</span>
00062 <span class="comment">  length. The issue here is that we are starting our copy from the</span>
00063 <span class="comment">  second element of s2 (s2[1]) and copying MAX more characters into</span>
00064 <span class="comment">  the contiguious space respectively.</span>
00065 <span class="comment"></span>
00066 <span class="comment">  Due to boundry lines on most modern computers this will most likely</span>
00067 <span class="comment">  not produce a runtime error unless resources are low. At any rate we</span>
00068 <span class="comment">  are "poking" a char into a memory address that is not managed my our</span>
00069 <span class="comment">  program. One way of fixing this problem might be to increase the</span>
00070 <span class="comment">  size of the array s2 or provide some sort of range checking.</span>
00071 <span class="comment">  */</span>
00072   <span class="keywordflow">while</span>(*++p2 = *p1++);
00073   cout &lt;&lt; <span class="stringliteral">"s2="</span> &lt;&lt; s2 &lt;&lt; endl;
00074 
00075   cout &lt;&lt; <span class="stringliteral">"sizeof(s2)="</span>&lt;&lt;<span class="keyword">sizeof</span>(s2)&lt;&lt;endl;
00076   cout &lt;&lt; <span class="stringliteral">"sizeof(p2)="</span>&lt;&lt;<span class="keyword">sizeof</span>(p2)&lt;&lt;endl;
00077 
00078   <span class="keywordflow">return</span> 0;
00079 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jun 15 03:48:57 2004 for Various C++ Examples (including IPC) by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
